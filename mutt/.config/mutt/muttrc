# ---------- Internals ----------#
# source id information 
# NOTE TO SELF: you need to have variables set in id-file if you're pulling this from git
# NOTE TO READER: $my_server ends with fastmail's "blahblah.com/INBOX." so folder switching is less painful
set mbox_type=Maildir
set folder=~/mail/Inbox
set sendmail=/usr/bin/msmtp
set sendmail_wait=0
set my_msmtp_pass=`gpg -d -q --no-tty ~/.config/mutt/fmail.gpg`

# set some folder mappings
set spoolfile="="
set postponed="=/\.Drafts"
set record="=/\.Sent Items"
folder-hook . 'set trash="=/\.Trash"'
folder-hook Trash 'unset trash'

# Mailboxen
mailboxes Inbox \
		  =/\.Arch \
		  =/\.Arch/\.Arch-dev \
		  =/\.Arch/\.Arch-projects \
		  =/\.Arch/\.Aur-general \
		  =/\.Arch/\.Pacman-dev \
		  =/\.Archive \
		  =/\.Chugalug \
		  =/\.Church \
		  =/\.Crux \
		  =/\.OpenBSD-announce \
		  =/\.OpenBSD-misc \
		  =/\.OpenBSD-tech \
		  =/\.Drafts \
		  =/\.Dynamis \
		  =/\.edX \
		  =/\.Important \
		  =/\.Important/\.School\ loans \
		  =/\.Jessica \
		  =/\.Junk\ Mail \
		  =/\.Lee \
		  =/\.Personal \
		  =/\.Queue \
		  =/\.Receipts \
		  =/\.Sent\ Items \
		  =/\.Trash

# used for replying with body
set include=yes
set fast_reply
set reply_to
set from='Jared Hamilton'
set text_flowed="yes"
set edit_headers
# ----------   END   ----------#

# ---------- APPEARANCE ---------#
# --------------&----------------#
# ----------  KEYBINDS  ---------#
# some aesthetics and viewing prefs
set editor=vim
set sort=threads
set sort_aux=reverse-last-date-received
set pager_index_lines=9
set pager_context=3
set smart_wrap
set pager_stop
set menu_scroll
unset markers
unset help

# Default index_format
folder-hook *Sent* 'set index_format="%3C %Z | %-35.35t | %(%b %e) %(\(%H:%M\)) | %s"'
folder-hook ! *Sent* 'set index_format="%3C %Z | %(!%b %e) %(!\(%H:%M\)) %-35.35F | %?M?[+](%2.M messages)? %s"'
set status_chars=" *%A"
set status_format="───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

# Filter out headers we don't want to see
ignore *
unignore From To Reply-To Cc Bcc Subject Date X-Label X-Mailer User-Agent

# Reorder some headers
unhdr_order *
hdr_order From To Cc Bcc Date Subject *

# Some personal headers
reply-hook . my_hdr Bcc: $my_id
# Logistics
set mark_old="no"
set delete="yes"
set confirmappend=no
set move=no
set sleep_time=0

# Threads begin collapsed except for threads with unread mails
unset collapse_unread
folder-hook . "exec collapse-all"

# for reading HTML mails, requires w3m (or reconfiguring mailcap command)
set mailcap_path="~/.config/mutt/mailcap"
auto_view text/html

## sidebar stuff
set sidebar_visible=no
set sidebar_width=25
set sidebar_shortpath=yes
set sidebar_delim=" |"
set sidebar_folderindent="yes"

# keybindings for more vim-like nav
bind index - collapse-thread
bind index _ collapse-all
bind index \Cl limit
bind index l display-message
bind index \CN sidebar-next
bind index \CP sidebar-prev
bind index \CO sidebar-open
bind pager,index,generic,attach h exit
bind pager j next-line
bind pager k previous-line
bind pager d half-down
bind pager u half-up
bind pager \Cb previous-page
bind pager \Cf next-page
bind pager D delete-message
bind pager gg top
bind pager G bottom
bind pager \Cd delete-message
bind pager,index H display-toggle-weed
bind pager R group-reply
bind attach <return> view-mailcap
# ----------      END      ----------#
	
# ---------- MAILING LISTS ----------# 
# Arch
subscribe arch-general@archlinux.org
subscribe arch-projects@archlinux.org
subscribe arch-dev-public@archlinux.org
subscribe aur-general@archlinux.org
subscribe pacman-dev@archlinux.org
subscribe arch-announce@archlinux.org
# Crux
subscribe crux@lists.crux.nu
subscribe crux-commits@lists.crux.nu
subscribe crux-devel@lists.crux.nu
# OpenBSD
subscribe advocacy@openbsd.org
subscribe announce@openbsd.org
subscribe misc@openbsd.org
subscribe tech@openbsd.org
subscribe openbsd-newbies@sfobug.theapt.org
# Others
subscribe chugalug@chugalug.org
subscribe orthodoxdynamis@yahoogroups.com
# ----------      END      ----------#

# ---------- Miscellaneous ----------#
# siggy sig
set signature="~/.config/mutt/signature"

# yay colors 
source ~/.config/mutt/colors/colors.arch
	
# Address book!
set alias_file="~/.config/mutt/addresses"
#set query_command="abook --mutt-query '%s'"
bind editor <Tab> complete-query
set sort_alias=alias
set reverse_alias=yes
source $alias_file

# And macros!
source ~/.config/mutt/macros
# ---------- END CONFIG ------------#
